<app-confirmation [message]="confirmationStatus.message" (onSelection)="doConfirmation($event)"></app-confirmation>
<div class="pop_up_container" id="groups-admin">
	<div class="pop_up_back" onclick="showPopup(false, '#groups-admin')"></div>
	<div class="pop_up">
		<div class="inner border_radius">
			<app-groups [course]="course._id" [groups]="course.groups" [members]="course.members" (onUpdate)="fetchCourse()" *ngIf="course.groups"></app-groups>
		</div>
	</div>
</div>
<div class="page_container">
	<div class="page_container_in">
		<section class="left_grid">
			<div class="p_16 resp_title ">
				<a routerLink="/cursos">
					<button class="btn btn_primary">
						<span class="va_m icon">
							<i class="material-icons">arrow_back</i>
						</span><span class="va_m">
							Regresar
						</span>
					</button>
				</a>
			</div>
			<div class="pos_r bg_white border b_light border_radius" *ngIf="course.name">
				<div class="list_element">
					<div class="ref">
						<span class="fc_white" [style.backgroundColor]="colors.getColor(course.name)">
							<label class="title_smaller size_24">{{ course.name.charAt(0) }}</label>
						</span>
					</div><div class="info">
						<div class="p_16">
							<h3 class="fw_n mb_4">
								{{ course.name }}
							</h3>
							<p class="fc_opacity">
								<b class="fw_500">Creado el {{ course.createdDate | formatDate }}</b>
							</p>
						</div>
					</div>
				</div>
				<div class="ta_r p_12 pr_16" *ngIf="auth.getUser()._id == course.user.id">
					<button class="btn bg_trans_secondary float_left" onclick="showPopup(true, '#groups-admin')">
						<span class="icon small">
							<i class="material-icons">group</i>
						</span><span class="text">Grupos</span>
					</button>
					<button class="btn_icon hover">
						<span class="icon">
							<i class="material-icons">mode_edit</i>
						</span><!-- <span class="text">Editar</span> -->
					</button>
					<button class="btn_icon hover" (click)="setConfirmation($event, 'deleteCourse')">
						<span class="icon">
							<i class="material-icons">delete</i>
						</span><!-- <span class="text">Eliminar</span> -->
					</button>
				</div>
				<div class="p_12 pr_16 pl_16" *ngIf="auth.getUser()._id != course.user.id">
					<button class="btn border_radius fw_b" [ngClass]="{ 'fc_green bg_trans_red' : isSuscribed(), 'bg_trans_blue' : !isSuscribed() }" (click)="setConfirmation($event, isSuscribed() ? 'unsuscribe': 'suscribe')" (mouseover)="suscribeAction = false" (mouseleave)="suscribeAction = true">
						<div *ngIf="isSuscribed()">
							<span class="icon va_m">
								<i class="material-icons">{{ suscribeAction ? 'check' : 'close' }}</i>
							</span><span class="va_m fs_m">
								{{ suscribeAction ? 'Inscrito(a)' : 'Cancelar Inscripci√≥n' }}
							</span>
						</div>
						<div *ngIf="!isSuscribed()">
							<span class="va_m fs_m">
								Inscribirse
							</span>
						</div>
					</button>
				</div>
				<div class="inner_info">
					<div class="p_12 pl_16 pr_16 fc_white">
						<div class="tags_container">
							<div class="col_a" *ngFor="let tag of course.tags">
								<span class="bg_blue tag">
									{{ tag }}
								</span>
							</div>
						</div>
					</div>
					<div class="p_16 pt_0" *ngIf="course.description">
						<p class="p_8 fs_b fc_gray">{{ course.description }}</p>
					</div>
					<div class="list_element" *ngIf="course.user">
						<div class="pl_12 pr_12 opacity">
							<b>Creado por:</b>
						</div>
						<a href="/perfil/{{ course.user.id }}">
							<div class="fc_trans_blue">
								<div class="ref">
									<div class="img_container mini">
										<img [src]="course.user.profilePhoto ? '/media/'+course.user.id+'/profile/'+course.user.profilePhoto : 'assets/icons/default_profile.png'">
									</div>
								</div><div class="info">
									<div class="p_16">
										<h3 class="fw_n mb_4">
											{{ course.user.name }} {{ course.user.lastName }}
										</h3>
										<p class="fc_opacity">
											<b class="fw_500">{{ course.user.mail }}</b>
										</p>
									</div>
								</div>
							</div>
						</a>
					</div>
				</div>
			</div>
		</section><section class="right_grid">
			<div class="resp_title p_24">
				<div class="h_selection ta_c">
					<div class="in border_radius bg_white border b_gray fc_gray">
						<div class="item hover_primary border_r b_gray" (click)="displayedList = 0" [class.bg_primary]="displayedList == 0">
							<h3>Contenidos</h3>
						</div><div class="item hover_primary border_r b_gray" (click)="displayedList = 1" [class.bg_primary]="displayedList == 1">
							<h3>Actividades</h3>
						</div><div class="item hover_primary" (click)="displayedList = 2" [class.bg_primary]="displayedList == 2">
							<h3>Miembros{{ course.members?.length > 0 ? ' ('+course.members?.length+')' : '' }}</h3>
						</div>
					</div>
				</div>
			</div>
			<div class="list mb_24 o_h">
				<section *ngIf="displayedList == 0">
					
				</section>
				<section *ngIf="displayedList == 1">
					
				</section>
				<section *ngIf="displayedList == 2">
					<div class="p_32 ta_c" *ngIf="course.members?.length < 1">
						<h2 class="title_big fw_l opacity">
							Ningun miembro por el momento
						</h2>
					</div>
					<ul class="pl_12 pr_12" *ngIf="course.members">
						<li class="border_radius" *ngFor="let member of course.members;let i = index" [ngClass]="{'border_t b_light': i > 0}">
							<a href="/perfil/{{ member.user._id }}">
								<div class="list_element fc_trans_blue">
									<div class="ref">
										<div class="img_container border_radius">
											<img [src]="member.user.profilePhoto && member.user.profilePhoto != '' ? '/media/' +member.user._id+'/profile/'+member.user.profilePhoto : 'assets/icons/default_profile.png'">
										</div>
									</div><div class="info">
										<div class="p_16">
											<h3 class="fw_500 mb_4">
												{{ member.user.name }} {{ member.user.lastName }}
											</h3>
											<p class="fc_opacity pt_4 pb_4">
												<b class="fw_500">{{ member.user.mail }}</b>
											</p>
											<p class="fc_opacity" *ngIf="member.group && member.group != ''">
												<b class="fw_500">Grupo:</b> {{ getMemberGroup(member.group) }}
											</p>
										</div>
									</div>
								</div>
							</a>
						</li>
					</ul>
				</section>
			</div>
		</section>
	</div>
</div>
