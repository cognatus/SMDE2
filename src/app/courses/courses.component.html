<div class="page_container course_list">
	<div class="pop_up_container" id="courses-add">
		<div class="pop_up_back" onclick="showPopup(false, '#courses-add')"></div>
		<div class="pop_up big">
			<div class="inner border_radius">
				<div class="bg_primary">
					<div class="pop_up_title fc_white">
						<h1 class="title">
							Nuevo Curso
						</h1>
						<div class="close_button">
							<button class="p_8 hover_black circle" onclick="showPopup(false, '#courses-add')">
								<img class="icon" src="assets/icons/arrow-left_white.png">
							</button>
						</div>
					</div>
				</div>
				<form class="padding_block col_r" (submit)="addCourse($event)">
					<div class="data_container">
						<h2 class="title_medium mb_24 fc_secondary">Información de Curso</h2>
						<div class="pl_8 pr_8">
							<div class="field_container pb_24">
								<div class="field mt_8">
									<label class="opacity fw_b fs_s">Nombre</label>
									<input type="text" [(ngModel)]="course.name" name="name" placeholder="Nombre del Curso" />
								</div>
								<div class="field mt_8">
									<label class="opacity fw_b fs_s">Etiquetas</label>
									<div class="pt_4" *ngIf="course.tags?.length > 0">
										<span class="bg_blue circle_radius fc_white p_8 mr_8 mb_8 pl_12 pr_8" *ngFor="let tag of course.tags">
											{{ tag }}
											<img class="icon small opacity cursor_pointer va_m pos_r" src="assets/icons/close_black.png" (click)="removeTag(tag)" style="top: -1px">
										</span>
									</div>
									<input type="text" [(ngModel)]="tagsString" name="tags" placeholder="Agrega etiquetas (Temas de interés, Especialidades, Materias)" (keydown)="addTag($event)" (keyup)="tagsString != null ? displayingTags = findTagCoincidences(tagsString, this.hiddenTags) : displayingTags = []">
									<div class="list_scroll mini bg_white shadow_flat" [hidden]="displayingTags?.length < 1">
										<div class="p_12 hover_black" *ngFor="let tag of displayingTags; let i=index" (click)="addTag($event, tag)" [ngClass]=" { 'bg_blue hover_blue': i == selectedDisplayTag } " [focused]="i == selectedDisplayTag">
											{{ tag }}
										</div>
									</div>
								</div>
								<div class="mt_8">
									<h4 class="opacity fw_b fs_s">Hacer Privado</h4>
									<div class="mt_8">
										<label class="switch">
											<input type="checkbox" name="isPrivate" [(ngModel)]="course.isPrivate">
											<span class="slider"></span>
										</label>
									</div>
								</div>
								<div class="field mt_8">
									<label class="opacity fw_b fs_s">Descipción</label>
									<textarea [(ngModel)]="course.description" name="description" placeholder="Agrega una descipción"></textarea>
								</div>
							</div>
							<div class="ta_r">
								<input type="submit" class="btn btn_primary" value="Crear Curso">
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
	<div class="page_container_in">
		<section class="list">
			<div class="p_16 resp_title main_action_button">
				<button class="btn btn_primary" onclick="showPopup(true, '#courses-add')">
					<span class="va_m icon">
						<i class="material-icons fw_500">add</i>
					</span><span class="va_m ml_4">
						Nuevo Curso
					</span>
				</button>
			</div>
			<div class="p_32 pt_64 ta_c" *ngIf="courses?.length < 1">
				<h2 class="title_big fw_l opacity">
					Ningun curso por el momento
				</h2>
				<div class="mt_48">
					<button class="btn btn_primary" onclick="showPopup(true, '#courses-add')">
						<span class="va_m icon">
							<i class="material-icons fw_500">add</i>
						</span><span class="va_m ml_4">
							Nuevo Curso
						</span>
					</button>
				</div>
			</div>
			<div class="col_r resp_list ta_c">
				<div class="col_2 ta_l" *ngFor="let course of courses">
					<div class="resp_item b_gray bg_white border_radius mb_16 pos_r b_trans">
						<a href="/cursos/{{ course._id }}">
							<div class="list_element">
								<div class="ref">
									<span class="circle bg_opacity_light fc_white" [style.background]="colors.getColor(course.name)">
										<label class="title_smaller fw_l size_24">{{ course.name.charAt(0) }}</label>
									</span>
								</div><div class="info">
									<div class="p_16">
										<h3 class="fw_500 mb_4">
											{{ course.name }}
										</h3>
										<p class="opacity">
											<b class="fw_500">Creado el {{ course.createdDate | formatDate }}</b>
										</p>
									</div>
								</div>
							</div>
							<div class="p_12 fc_white">
								<div class="tags_container">
									<div class="col_a" *ngFor="let tag of course.tags; let i = index">
										<span class="bg_blue tag">
											{{ tag }}
										</span>
									</div>
								</div>
							</div>
							<div class="p_16 pt_0" *ngIf="course.description">
								<p class="p_8 fs_b">{{ course.description }}</p>
							</div>
							<div class="list_element">
								<div class="pl_12 pr_12 opacity">
									<b>Creado por:</b>
								</div>
								<a href="/perfil/{{ course.user.id }}">
									<div class="hover_blue">
										<div class="ref">
											<div class="img_container circle">
												<img [src]="course.user.profilePhoto ? '/media/'+course.user.id+'/profile/'+ course.user.profilePhoto : 'assets/icons/default_profile.png'">
											</div>
										</div><div class="info">
											<div class="p_16">
												<h3 class="fw_500 mb_4">
													{{ course.user.name }} {{ course.user.lastName }}
												</h3>
												<p class="opacity">
													<b class="fw_500">{{ course.user.mail }}</b>
												</p>
											</div>
										</div>
									</div>
								</a>
							</div>
						</a>
						
					</div>	
				</div>
			</div>
			<div class="p_32" *ngIf="courses?.length > 0"></div>
		</section>
	</div>
</div>
