<app-confirmation [alert]="alert" (onSelection)="doConfirmation($event)"></app-confirmation>
<div class="pop-up-container gallery" id="profile-gallery" *ngIf="photos[selectedAlbum].array?.length > 0">
	<div class="pop-up-back" onclick="showPopup(false, '#profile-gallery')"></div>
	<div class="pop-up">
		<div class="inner border-radius">
			<div class="border-b b-light bg-white">
				<div class="pop-up-title fc-opacity">
					<h1 class="title" *ngIf="selectedAlbum == 0">
						Fotos de Portada
					</h1>
					<h1 class="title" *ngIf="selectedAlbum == 1">
						Fotos de Perfil
					</h1>
					<div class="close-button">
						<button class="btn-icon hover" onclick="showPopup(false, '#profile-gallery')">
							<span class="icon">
								<i class="material-icons fc-opacity">arrow_back</i>
							</span>
						</button>
					</div>
				</div>
			</div>
			<div class="gallery-container">
				<div class="gal-inner bg-black pos-r">
					<div class="img-container">
						<img src="{{ photos[selectedAlbum].array[photos[selectedAlbum].selected] }}">
					</div>
					<div class="tr-0 h-32" *ngIf="privateUser">
						<div class="increment-margin size-32 pos-r">
							<button class="options-button hover size-32 align-center circle">
								<img class="icon va-m" src="assets/icons/dots-vertical-white.png">
							</button>
							<div class="hidden-options">
								<div class="bg-white border b-gray pb-8 pt-8 shadow-raised border-radius fc-n">
									<p class="p-8 pl-16 pr-16 hover" (click)="changePhoto()" *ngIf="selectedAlbum == 0 && photos[selectedAlbum].array[photos[selectedAlbum].selected] !== userSrc + 'background/' + user.backPhoto">
										<span>Seleccionar como foto de portada</span>
									</p>
									<p class="p-8 pl-16 pr-16 hover" (click)="changePhoto()" *ngIf="selectedAlbum == 1 && photos[selectedAlbum].array[photos[selectedAlbum].selected] !== userSrc + 'profile/' + user.profilePhoto">
										<span>Seleccionar como foto de Perfil</span>
									</p>
									<p class="p-8 pl-16 pr-16 hover" (click)="setConfirmation()">
										Eliminar Foto
									</p>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="buttons-container align-center bg-white col-s fs-m">
					<button id="prof-galbutton-left" class="col-3 left hover fc-opacity" (click)="passImg(false, photos[selectedAlbum].album)" *ngIf="photos[selectedAlbum].array.length > 1">
						<span class="icon">
							<i class="material-icons">arrow_back</i>
						</span><span class="ml-16 fs-m fw-500">Atras</span>
					</button><div class="col-3 full-h va-m fs-b fc-opacity">
						<span class="va-m mt-12">
							<b>{{ photos[selectedAlbum].selected + 1 }}</b> de <b>{{ photos[selectedAlbum].array.length }}</b>
						</span>
					</div><button id="prof-galbutton-right" class="col-3 right hover fc-opacity" (click)="passImg(true, photos[selectedAlbum].album)" *ngIf="photos[selectedAlbum].array.length > 1">
						<span class="mr-16 fs-m fw-500">Siguiente</span><span class="icon">
							<i class="material-icons">arrow-forward</i>
						</span>
					</button>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="pop-up-container" id="user-editphotos" *ngIf="privateUser">
	<div class="pop-up-back" onclick="showPopup(false, '#user-editphotos')"></div>
	<div class="pop-up">
		<div class="inner border-radius">
			<div class="border-b b-light">
				<div class="pop-up-title fc-opacity">
					<h1 class="title">
						Actualizar Fotos
					</h1>
					<div class="close-button">
						<button class="btn-icon hover" onclick="showPopup(false, '#user-editphotos')">
							<span class="icon">
								<i class="material-icons fc-opacity">arrow_back</i>
							</span>
						</button>
					</div>
				</div>
			</div>
			<div class="update-photos-container">
				<div class="profile-display small">
					<div class="background bg-primarydark">
						<div class="editable">
							<button class="btn-icon hover" onclick="triggerClick('#back-img-file')">
								<img class="icon" src="assets/icons/camera-white.png">
							</button>
						</div>
						<div class="img-container bg-primarydark">
							<img [src]="user.backPhoto ? '/media/'+user._id+'/background/'+user.backPhoto : ''" id="profile-back" adjustable>
						</div>
					</div>
					<div class="profile-photo fc-white">
						<div class="inner">
							<div class="img-container border-radius-max shadow-flat">
								<img id="profile-photo" [src]="user.profilePhoto != undefined && user.profilePhoto != null ? '/media/'+user._id+'/profile/'+user.profilePhoto : 'assets/icons/default-profile.png'">
								<div class="editable" onclick="triggerClick('#profile-img-file')">
									<img src="assets/icons/camera-white.png">
								</div>
							</div>
						</div>
					</div>
				</div>
				<form id="formUpload" class="p-16 align-right" action="api/profile/" method="POST" enctype="multipart/form-data">
					<div class="hidden-input">
						<input type="file" accept="image/*" name="profilePhoto" id="profile-img-file" onchange="previewPhoto(this, '#profile-photo')">
						<input type="file" accept="image/*" name="profileBackground" id="back-img-file" onchange="previewPhoto(this, '#profile-back');resizeImg('#profile-back');">
					</div>
					<button class="btn btn-cancel" onclick="showPopup(false, '#user-editphotos')">Cancelar</button>
					<input type="submit" class="btn btn-primary ml-8" name="" value="Actualizar" onclick="$('#formUpload').submit();">
				</form>
			</div>
		</div>
	</div>
</div>
<article class="mb-24">
	<section class="mb-12 pos-r">
		<div class="tr-0 h-32">
			<div class="increment-margin size-32 pos-r">
				<button class="options-button hover size-32 align-center circle">
					<span class="icon fc-white">
						<i class="material-icons">more_vert</i>
					</span>
				</button>
				<div class="hidden-options">
					<div class="bg-white pb-8 pt-8 shadow-raised border-radius border b-gray">
						<p class="p-8 pl-16 pr-16 hover" onclick="showPopup(true, '#profile-gallery')" (click)="selectedAlbum = 0" *ngIf="photos[0].array.length > 0">
							Ver foto de portada
						</p>
						<p class="p-8 pl-16 pr-16 hover" onclick="showPopup(true, '#user-editphotos')" *ngIf="privateUser">
							Subir fotos
						</p>
					</div>
				</div>
			</div>
		</div>
		<article class="profile-display">
			<div class="background bg-primarydark">
				<div class="img-container" *ngIf="user.backPhoto != undefined && user.backPhoto != ''">
					<img src="/media/{{ user._id }}/background/{{ user.backPhoto }}" adjustable>
				</div>
				<div class="bg-opacity" *ngIf="user.backPhoto != undefined && user.backPhoto != ''"></div>
			</div>
			<div class="profile-photo fc-white">
				<div class="inner">
					<div class="img-container border-radius-max shadow-flat cursor-pointer" [attr.id]="photos[1].array?.length > 0 ? 'profile-photo-img' : null" (click)="selectedAlbum = 1">
						<img [src]="user.profilePhoto && user.profilePhoto != '' ? '/media/'+user._id+'/profile/'+user.profilePhoto : 'assets/icons/default-profile.png'">
					</div><div class="info">
						<h3 class="title-smaller">
							{{ user.name }} {{ user.lastName }}
						</h3>
						<p class="opacity mt-8">
							<b class="fs-b fw-n">{{ user.mail }}</b>
						</p>
					</div>
				</div>
			</div>
		</article>
		<section class="p-16">
			<div class="align-center card m-0">
				<div class="row">
					<div class="col-md-6 col-lg-4 hover-light">
						<div class="p-8 pl-12 pl-12 border-r b-light">
							<h4 class="fw-n opacity">Tipo</h4>
							<h2 class="fw-n fs-b mt-4">{{ userTypes[user.privilege] }}</h2>
						</div>
					</div><div class="col-md-6 col-lg-4 hover-light">
						<div class="p-8 pl-12 pl-12 border-r b-light">
							<h4 class="fw-n opacity">Cursos</h4>
							<h2 class="fw-n fs-b mt-4" *ngIf="user.courses?.length > 0">{{ user.courses?.length }}</h2>
							<h2 class="fw-n fs-b mt-4" *ngIf="user.courses?.length < 1 || user.courses == undefined">0</h2>
						</div>
					</div><div class="col-md-6 col-lg-4 hover-light">
						<div class="p-8 pl-12 pl-12">
							<h4 class="fw-n opacity">Promedio</h4>
							<h2 class="fw-n fs-b mt-4">0.0</h2>
						</div>
					</div>
				</div>
			</div>
		</section>
	</section>
	<div class="page-container">
		<div class="page-container-in">
			<section>
				<div class="p-16 resp-title">
					<h2 class="title-small fc-secondary">
						Información
					</h2>
				</div>
				<div class="m-8 bg-white border b-light border-radius">
					<div class="p-16">
						<div class="mb-12">
							<p class="opacity fw-b mb-4">Teléfono</p>
							<p class="fs-b">
								<img class="icon opacity va-m m-8" src="assets/icons/phone-black.png">
								<span class=" va-m ml-8">
									{{ user.phone }}
								</span>
							</p>
						</div>
						<div>
							<p class="opacity fw-b mb-4">Dirección</p>
							<p class="fs-b">
								<img class="icon opacity va-m m-8" src="assets/icons/map-marker-black.png">
								<span class="va-m ml-8 opacity">
									<b>Sin dirección</b>
								</span>
							</p>
						</div>
					</div>
				</div>
			</section>
			<section *ngIf="user.privilege != 0">
				<div class="p-16 resp-title">
					<h2 class="title-small fc-secondary">
						Cursos
					</h2>
				</div>
				<div class="p-32 align-center" *ngIf="user.courses?.length < 1">
					<h2 class="title-big fw-300 fc-lightgray" *ngIf="!privateUser">
						Este usuario no esta inscrito a ningun curso por el momento
					</h2>
					<div *ngIf="privateUser">
						<h2 class="title-big fw-300 fc-lightgray">
							No estas inscrito a ningun curso por el momento
						</h2>
						<div class="mt-32">
							<a href="/cursos">
								<button class="btn bg-trans-secondary">
									Agregar Curso(s)
								</button>
							</a>
						</div>
					</div>
				</div>
				<div class="bg-white shadow-flat border-radius mb-12" *ngFor="let course of user.courses">
					<div class="list-element">
						<div class="ref">
							<span class="circle">
								<label class="title-smaller fw-l fc-white size-24">{{ (course.name).charAt(0) }}</label>
							</span>
						</div><div class="info">
							<div class="p-12 pl-16 pr-16">
								<div class="mb-8">
									<h3 class="fw-500 mb-4">
										{{ course.subject.name }}
									</h3>
									<p class="opacity">
										<b>{{ course.group.name }}</b>
									</p>
									<div class="mt-8">
										<p class="opacity">
											Nivel Asignatura: <b>{{ course.subject.level }}</b>
										</p>
										<p class="opacity">
											Nivel Grupo: <b>{{ course.group.level }}</b>
										</p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>
		</div>
	</div>
</article>


